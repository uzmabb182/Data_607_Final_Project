---
title: "Data 607 - Final Project"
output: html_document
---

### Project Proposal:

Source of motivation for the final project: 


Highest level of educational attainment:	Completing College

 https://data.ers.usda.gov/reports.aspx?ID=17829

API Call to census five years data:

https://api.census.gov/data/2019/acs/acs1?get=NAME,B01001_001E&for=county:*

I am sharing Forbes magazine's article. My source of motivation for this project is to investigate one of the paperâ€™s key findings including:

"Students with a family income of $100,000 or more are more than twice as likely as students with family income under $50,000 to have combined SAT test scores of 1400 to 1600".

I will perform web scraping to fetch SAT data for several years and API call for the census five-year data. Both of my datasets will be for the state of New Jersey counties. I will perform the linear regression and try for other regression to find the correlation between the family income and students' SAT scores.

Also, perform the one of the machine learning to predict the next year's SAT outcome.


Importing Libraries

```{r}
library(tidycensus)
library(tidyverse)
library(dplyr)
library(plotly)
library(tidyr)
library(stringr)
library(rvest)

```


```{r}
Sys.setenv(census_api_key = "f7ce5a76ddf2088c73fda9c0a87410995cebbffa")
Sys.getenv("census_api_key")
```


### Access the API key
### Save the Census API key in the environmental variable.
```{r}
census_api_key("YOUR KEY GOES HERE", install = TRUE)
```


```{r}
Sys.getenv("census_api_key")
```


```{r}
# https://api.census.gov/data/2019/acs/acs1?get=NAME,B01001_001E&for=county:*

nj_wide <- get_acs(
  geography = "county",
  state = "NJ",
  variables = c(population = "B01003_001E",
                median_age = "B01002_001E",
                household_income = "B19013_001E",
                per_capita_income = "B19301_001E",
                poverty_count = "B17001_002E",
                unemployment_count = "B23025_005E"
                ),
  output = "wide",
  year = 2020
)

nj_wide
```

### Checking the working directory path and exporting data frame into a CSV file

```{r}
# Get working directory path
path <- getwd()

path

```


### Web Scraping Counties fips code


### Generate the html source code by calling the read_html function

```{r}

webpage <- read_html("https://en.wikipedia.org/wiki/List_of_United_States_FIPS_codes_by_county")

tbls <- html_nodes(webpage, "table")

head(tbls)
```

### Calling html_nodes function with CSS Selector and html_table will generate the table

```{r}
# subset list of table nodes for items 3 & 4
fips_table <- webpage %>%
        html_nodes("#mw-content-text") %>% html_table() %>% .[[1]]
        
view(fips_table)
```








`



